esphome:
  name: esp32-cam-46c474
  friendly_name: ESP32-CAM 46c474

esp32:
  board: esp32cam
  framework:
    type: esp-idf

# Enable logging
logger:

# Enable Home Assistant API
api:
  reboot_timeout: 0s
  encryption:
    key: !secret esp32-cam_api_encryption_key

ota:
  - platform: esphome
    password: !secret esp32-cam_ota_password

wifi:
  networks:
    - ssid: !secret wifi_ssid
      password: !secret wifi_password
    - ssid: !secret backup_wifi_ssid
      password: !secret backup_wifi_password
  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: ESP32-CAM 46c474 Fallback
    password: !secret esp32_cam_ap_password

captive_portal:

# Time component for accurate timing
time:
  - platform: homeassistant
    id: homeassistant_time

# Status LED (optional)
status_led:
  pin: GPIO4

# Additional device-specific configuration
sensor:
  - platform: wifi_signal
    name: WiFi Signal
    update_interval: 60s
  
  - platform: uptime
    name: Uptime

text_sensor:
  - platform: version
    name: ESPHome Version

  - platform: wifi_info
    ip_address:
      name: IP Address
    ssid:
      name: Connected SSID

binary_sensor:
  - platform: gpio
    pin: 
      number: GPIO15
      mode:
        input: true
        pullup: true
    name: "PIR Sensor"
    device_class: motion

switch:
  - platform: restart
    name: Restart Device